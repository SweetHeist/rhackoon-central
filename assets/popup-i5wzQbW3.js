import{r as J,v as pe,h as p,w as ne,x as z,y as j,z as _e,A as se,B as me,C as re,E as he,D as te,F as ge,G as be,m as D,H as R,I as ve,J as oe,K as Q,L as we,M as Ee,N as ye,O as Ce,P as Se,Q as fe,a as M,R as ue,S as Te,T as ke,U as Ae,V as de,W as xe,X as Pe,Y as Ie,j as B,Z as Re,_ as He,$ as Me,l as Be,a0 as ze,a1 as De,a2 as Ne,g as V,i as G,n as T,k as S,b as H,a3 as N,d as C,p as W,f as k,t as U,s as F,e as ee,a4 as Oe,a5 as qe,a6 as L,a7 as Y,q as Fe}from"./legacy-CCVVp6yd.js";function Le(e,a){return a}function Ye(e,a,n){for(var f=[],v=a.length,t,s=a.length,r=0;r<v;r++){let c=a[r];oe(c,()=>{if(t){if(t.pending.delete(c),t.done.add(c),t.pending.size===0){var m=e.outrogroups;ae(re(t.done)),m.delete(t),m.size===0&&(e.outrogroups=null)}}else s-=1},!1)}if(s===0){var d=f.length===0&&n!==null;if(d){var i=n,_=i.parentNode;Ee(_),_.append(i),e.items.clear()}ae(a,!d)}else t={pending:new Set(a),done:new Set},(e.outrogroups??=new Set).add(t)}function ae(e,a=!0){for(var n=0;n<e.length;n++)ye(e[n],a)}var ie;function Ke(e,a,n,f,v,t=null){var s=e,r=new Map;{var d=e;s=d.appendChild(J())}var i=null,_=se(()=>{var o=n();return me(o)?o:o==null?[]:re(o)}),c,m=!0;function g(){h.fallback=i,Ue(h,c,s,a,f),i!==null&&(c.length===0?(i.f&R)===0?ve(i):(i.f^=R,q(i,null,s)):oe(i,()=>{i=null}))}var l=pe(()=>{c=p(_);for(var o=c.length,b=new Set,u=z,y=_e(),E=0;E<o;E+=1){var w=c[E],x=f(w,E),A=m?null:r.get(x);A?(A.v&&ne(A.v,w),A.i&&ne(A.i,E),y&&u.skipped_effects.delete(A.e)):(A=Ve(r,m?s:ie??=J(),w,x,E,v,a,n),m||(A.e.f|=R),r.set(x,A)),b.add(x)}if(o===0&&t&&!i&&(m?i=j(()=>t(s)):(i=j(()=>t(ie??=J())),i.f|=R)),!m)if(y){for(const[P,ce]of r)b.has(P)||u.skipped_effects.add(ce.e);u.oncommit(g),u.ondiscard(()=>{})}else g();p(_)}),h={effect:l,items:r,outrogroups:null,fallback:i};m=!1}function O(e){for(;e!==null&&(e.f&we)===0;)e=e.next;return e}function Ue(e,a,n,f,v){var t=a.length,s=e.items,r=O(e.effect.first),d,i=null,_=[],c=[],m,g,l,h;for(h=0;h<t;h+=1){if(m=a[h],g=v(m,h),l=s.get(g).e,e.outrogroups!==null)for(const P of e.outrogroups)P.pending.delete(l),P.done.delete(l);if((l.f&R)!==0)if(l.f^=R,l===r)q(l,null,n);else{var o=i?i.next:r;l===e.effect.last&&(e.effect.last=l.prev),l.prev&&(l.prev.next=l.next),l.next&&(l.next.prev=l.prev),I(e,i,l),I(e,l,o),q(l,o,n),i=l,_=[],c=[],r=O(i.next);continue}if((l.f&Q)!==0&&ve(l),l!==r){if(d!==void 0&&d.has(l)){if(_.length<c.length){var b=c[0],u;i=b.prev;var y=_[0],E=_[_.length-1];for(u=0;u<_.length;u+=1)q(_[u],b,n);for(u=0;u<c.length;u+=1)d.delete(c[u]);I(e,y.prev,E.next),I(e,i,y),I(e,E,b),r=b,i=E,h-=1,_=[],c=[]}else d.delete(l),q(l,r,n),I(e,l.prev,l.next),I(e,l,i===null?e.effect.first:i.next),I(e,i,l),i=l;continue}for(_=[],c=[];r!==null&&r!==l;)(d??=new Set).add(r),c.push(r),r=O(r.next);if(r===null)continue}(l.f&R)===0&&_.push(l),i=l,r=O(l.next)}if(e.outrogroups!==null){for(const P of e.outrogroups)P.pending.size===0&&(ae(re(P.done)),e.outrogroups?.delete(P));e.outrogroups.size===0&&(e.outrogroups=null)}if(r!==null||d!==void 0){var w=[];if(d!==void 0)for(l of d)(l.f&Q)===0&&w.push(l);for(;r!==null;)(r.f&Q)===0&&r!==e.fallback&&w.push(r),r=O(r.next);var x=w.length;if(x>0){var A=t===0?n:null;Ye(e,w,A)}}}function Ve(e,a,n,f,v,t,s,r){var d=(s&ge)!==0?(s&be)===0?D(n,!1,!1):te(n):null,i=(s&he)!==0?te(v):null;return{v:d,i,e:j(()=>(t(a,d??n,i??v,r),()=>{e.delete(f)}))}}function q(e,a,n){if(e.nodes)for(var f=e.nodes.start,v=e.nodes.end,t=a&&(a.f&R)===0?a.nodes.start:n;f!==null;){var s=Ce(f);if(t.before(f),f===v)return;f=s}}function I(e,a,n){a===null?e.effect.first=n:a.next=n,n===null?e.effect.last=a:n.prev=a}function Ge(e,a,n=a){var f=new WeakSet;Se(e,"input",async v=>{var t=v?e.defaultValue:e.value;if(t=Z(e)?$(t):t,n(t),z!==null&&f.add(z),await fe(),t!==(t=a())){var s=e.selectionStart,r=e.selectionEnd,d=e.value.length;if(e.value=t??"",r!==null){var i=e.value.length;s===r&&r===d&&i>d?(e.selectionStart=i,e.selectionEnd=i):(e.selectionStart=s,e.selectionEnd=Math.min(r,i))}}}),M(a)==null&&e.value&&(n(Z(e)?$(e.value):e.value),z!==null&&f.add(z)),ue(()=>{var v=a();if(e===document.activeElement){var t=Te??z;if(f.has(t))return}Z(e)&&v===$(e.value)||e.type==="date"&&!v&&!e.value||v!==e.value&&(e.value=v??"")})}function Z(e){var a=e.type;return a==="number"||a==="range"}function $(e){return e===""?null:+e}function le(e,a){return e===a||e?.[de]===a}function We(e={},a,n,f){return ke(()=>{var v,t;return ue(()=>{v=t,t=[],M(()=>{e!==n(...t)&&(a(e,...t),v&&le(n(...v),e)&&a(null,...v))})}),()=>{Ae(()=>{t&&le(n(...t),e)&&a(null,...t)})}}),e}let K=!1;function Xe(e){var a=K;try{return K=!1,[e(),K]}finally{K=a}}function X(e,a,n,f){var v=!Be||(n&ze)!==0,t=(n&De)!==0,s=f,r=!0,d=()=>(r&&(r=!1,s=f),s),i;{var _=de in e||Ne in e;i=xe(e,a)?.set??(_&&a in e?u=>e[a]=u:void 0)}var c,m=!1;[c,m]=Xe(()=>e[a]);var g;if(v?g=()=>{var u=e[a];return u===void 0?d():(r=!0,u)}:g=()=>{var u=e[a];return u!==void 0&&(s=void 0),u===void 0?s:u},v&&(n&Pe)===0)return g;if(i){var l=e.$$legacy;return(function(u,y){return arguments.length>0?((!v||!y||l||m)&&i(y?g():u),u):g()})}var h=!1,o=se(()=>(h=!1,g()));p(o);var b=He;return(function(u,y){if(arguments.length>0){const E=y?p(o):v&&t?Ie(u):u;return B(o,E),h=!0,s!==void 0&&(s=E),u}return Re&&h||(b.f&Me)!==0?o.v:p(o)})}var Je=k('<div class="primary svelte-zh7yws"><p>You are the primary window.</p> <p>Show expanded controls here.</p></div>'),Qe=k('<div class="secondary svelte-zh7yws"><p>You are a secondary window.</p> <p>This view is intentionally minimal.</p></div>'),Ze=k('<section class="combine svelte-zh7yws"><h2>Combined View</h2> <!></section>');function $e(e,a){V(a,!1);let n=X(a,"state",8);G();var f=Ze(),v=T(S(f),2);{var t=r=>{var d=Je();C(r,d)},s=r=>{var d=Qe();C(r,d)};H(v,r=>{N(n()),M(()=>n().role==="primary")?r(t):r(s,!1)})}C(e,f),W()}var je=k('<p class="hint svelte-19dk7pd">This panel is part of a combination.</p>'),ea=k('<div class="content"><p> </p> <p> </p> <!></div>'),aa=k('<div><small class="window-title svelte-19dk7pd">Terminal 3a.b_c4 v1.0</small> <button>Combine</button> <section class="panel svelte-19dk7pd"><header class="svelte-19dk7pd"><h2>Panel</h2> <button> </button></header> <!></section></div>');function ra(e,a){V(a,!1);let n=X(a,"state",8),f=D(!1);function v(){B(f,!p(f))}G();var t=aa(),s=T(S(t),2),r=T(s,2),d=S(r),i=T(S(d),2),_=S(i),c=T(d,2);{var m=g=>{var l=ea(),h=S(l),o=S(h),b=T(h,2),u=S(b),y=T(b,2);{var E=w=>{var x=je();C(w,x)};H(y,w=>{N(n()),M(()=>n().mode==="combined")&&w(E)})}U(()=>{F(o,`Mode: ${N(n()),M(()=>n().mode)??""}`),F(u,`Role: ${N(n()),M(()=>n().role)??""}`)}),C(g,l)};H(c,g=>{p(f)||g(m)})}U(()=>F(_,p(f)?"▶":"▼")),ee("click",s,()=>{console.debug(window.opener),window.opener?.postMessage({type:"requestCombine"},"*")}),ee("click",i,v),C(e,t),W()}var na=k('<div class="primary svelte-tdc8q4"><h1><time>12:00</time></h1></div>'),ta=k('<div class="secondary svelte-tdc8q4"><p>You are a secondary window.</p> <p>This view is intentionally minimal.</p></div>'),ia=k('<section class="time svelte-tdc8q4"><h2>Time</h2> <!></section>');function la(e,a){V(a,!1);let n=X(a,"state",8);G();var f=ia(),v=T(S(f),2);{var t=r=>{var d=na();C(r,d)},s=r=>{var d=ta();C(r,d)};H(v,r=>{N(n()),M(()=>n().role==="primary")?r(t):r(s,!1)})}C(e,f),W()}var sa=k('<div class="line svelte-9fkt2p"> </div>'),va=k('<div class="terminal svelte-9fkt2p"><div class="header svelte-9fkt2p">(c) 2026 Sweet Heist<br/> rHACKoon Terminal [3a.b_c4_v1.0]<br/><br/> Type --help to get more information</div> <div class="output svelte-9fkt2p"></div> <div class="input-row svelte-9fkt2p"><span class="prompt svelte-9fkt2p">rHACKoon@Pascal&gt; <small> </small></span> <input class="svelte-9fkt2p"/></div></div>');function oa(e,a){V(a,!1);let n=X(a,"state",8),f=D([]),v=D(""),t=D();function s(o){return Array.isArray(o)?o.join(`
`):String(o??"")}async function r(o){B(f,[...p(f),o]),await fe(),p(t).scrollHeight-p(t).scrollTop-p(t).clientHeight<50&&qe(t,p(t).scrollTop=p(t).scrollHeight)}function d(o){if(o.key==="Enter"){o.preventDefault(),r(`rHACKoon@Pascal> (${n().role}) ${p(v)}`);const u=n().terminalCommands.input===p(v)?s(n().terminalCommands.output):n().terminalCommands.error;r(u),B(v,"")}}G();var i=va(),_=T(S(i),2);Ke(_,5,()=>p(f),Le,(o,b)=>{var u=sa(),y=S(u);U(()=>F(y,p(b))),C(o,u)}),We(_,o=>B(t,o),()=>p(t));var c=T(_,2),m=S(c),g=T(S(m)),l=S(g),h=T(m,2);Oe(h),U(()=>F(l,`(${N(n()),M(()=>n().role)??""})`)),Ge(h,()=>p(v),o=>B(v,o)),ee("keydown",h,d),C(e,i),W()}var fa=k("<div>Unknown app</div>");function ua(e){let a=D({app:"panel",mode:"single",role:"primary"});window.addEventListener("message",s=>{s.data?.type==="setState"&&B(a,{...p(a),...s.data.payload})});var n=L(),f=Y(n);{var v=s=>{ra(s,{get state(){return p(a)}})},t=s=>{var r=L(),d=Y(r);{var i=c=>{$e(c,{get state(){return p(a)}})},_=c=>{var m=L(),g=Y(m);{var l=o=>{la(o,{get state(){return p(a)}})},h=o=>{var b=L(),u=Y(b);{var y=w=>{oa(w,{get state(){return p(a)}})},E=w=>{var x=fa();C(w,x)};H(u,w=>{p(a).app==="terminal"?w(y):w(E,!1)},!0)}C(o,b)};H(g,o=>{p(a).app==="time"?o(l):o(h,!1)},!0)}C(c,m)};H(d,c=>{p(a).app==="combine"?c(i):c(_,!1)},!0)}C(s,r)};H(f,s=>{p(a).app==="panel"?s(v):s(t,!1)})}C(e,n)}Fe(ua,{target:document.getElementById("popup-app")});
